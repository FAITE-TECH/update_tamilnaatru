<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title>TamilNaatru</title>

  <link rel="stylesheet" href="newstyle.css" />
  <link href="https://fonts.googleapis.com/css2?family=Pavanam&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BSYT314EWJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-BSYT314EWJ');
</script>

  <style>
    

/* Search Bar Styling 
.search-bar-container {
    display: flex;
    gap: 10px;
    flex: 1 1 40%; /* Adjust width to fit alongside the text */
    justify-content: flex-start; /* Align search bar to the start 
    flex-wrap: wrap;
}

.search-input {
    padding: 10px;
    width: 300px;
    max-width: 100%;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 16px;
    font-family: 'Tamil Sangam MN', 'Arial', sans-serif;
    outline: none;
    box-sizing: border-box;
    
}

.search-input:focus {
    border-color: #ff4f5a;
    box-shadow: 0 0 5px rgba(255, 79, 90, 0.5);
}

.search-button {
    padding: 10px 20px;
    background-color: #343a40;
    color: white;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.search-button:hover {
    background-color: #5f3434;
}

.search-results-container {
    margin-top: 10px;
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    padding: 10px;
    max-height: 200px;
    overflow-y: auto;
    display: none; /* Hidden by default */
    position: absolute; /* Position it below the search bar */
    width: 100%; /* Match the width of the search bar 
    z-index: 1000;
}


.search-result-item {
    display: block;
    padding: 5px 10px;
    text-decoration: none;
    color: #333;
    border-bottom: 1px solid #ddd;
}

.search-result-item:hover {
    background-color: #f0f0f0;
    color: #000;
}*/

/*new container*/
/* Image Styling */
.prof-photo {
    width: 120px; /* Fixed width for uniformity */
    height: 120px; /* Fixed height to maintain square shape */
    object-fit: cover; /* Ensure the image scales properly */
    border-radius: 8px; /* Rounded corners for the image */
    flex-shrink: 0; /* Prevent the image from shrinking */
}


/* Header (Title) styling */
.updates-header {
    font-size: 18px;
    font-weight: bold;
    margin: 0 0 10px;
    color: #333;
}
.upper-container p{
    font-size: 14px; 
}


/* Inner Div Styling */
.upper-container > div {
    display: flex;
    gap: 20px; /* Space between the image and the content */
    align-items: flex-start; /* Align items at the start */
    background-color: #f9f9f9;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08); /* Subtle shadow for elegance */
    transition: transform 0.2s, box-shadow 0.2s;
}

/* Content (h2, p, h5, button) Styling Inside Div */
.upper-container > div > img + * { /* Ensures everything after the image is grouped */
    display: flex;
    flex-direction: column; /* Stack content vertically */
    gap: 10px; /* Space between h2, p, h5, and button */
}
/* Image Styling */
.prof-photo {
    width: 120px; /* Fixed width for uniformity */
    height: 120px; /* Fixed height to maintain square shape */
    object-fit: cover; /* Ensure the image scales properly */
    border-radius: 8px; /* Rounded corners for the image */
    flex-shrink: 0; /* Prevent the image from shrinking */
}




.lower-container p{
    font-size: 14px; 
}


/* Inner Div Styling */
.lower-container > div {
    display: flex;
    gap: 20px; /* Space between the image and the content */
    align-items: flex-start; /* Align items at the start */
    background-color: #f9f9f9;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08); /* Subtle shadow for elegance */
    transition: transform 0.2s, box-shadow 0.2s;
}

/* Content (h2, p, h5, button) Styling Inside Div */
.lower-container > div > img + * { /* Ensures everything after the image is grouped */
    display: flex;
    flex-direction: column; /* Stack content vertically */
    gap: 10px; /* Space between h2, p, h5, and button */
}


/* Inner Div Styling */
.lower-container > div {
    display: flex;
    gap: 20px; /* Space between the image and the content */
    align-items: flex-start; /* Align items at the start */
    background-color: #f9f9f9;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08); /* Subtle shadow for elegance */
    transition: transform 0.2s, box-shadow 0.2s;
}

.cta-btn {
        display: inline-block;
        padding: 12px 25px;
        margin-top: 0px;
        font-size: 14px;
        color: #ffffff;
        background-color: #ff4f5a;
        border: none;
        border-radius: 5px;
        text-decoration: none;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        cursor: pointer;
        width: 175px;
        height: 35px;
    }




 </style>
</head>
<body>

    <div class="hero_area">
      <body>
      
<?php
include('navigation.php');
?>

<!--section class="small-page">
  <div class="content-container">
    <Text Section >
    <div class="text-section">
      <h2>"தமிழ் நாற்று வலைத்தள பக்கத்திற்கு வரவேற்கிறோம்"</h2>
      <blockquote class="thirukkural">
      "பிறப்பொக்கும் எல்லா உயிர்க்கும்"
      </blockquote>
    </div-->

    <!-- Search Bar Container ->
    <div class="search-bar-container">
      <form method="GET" action="search.php">
        <input type="text" name="query" placeholder="தேடல்..." class="search-input" required>
        <input type="submit" value="தேடு" class="search-button">
        <div id="searchResults" class="search-results-container"></div>
      </form>
    </div>
  </div>
</section-->

        
        
  
      
  
 

<div class="container">    
    <!-- Left Side1 -->
    <div class="first_left" id="first_leftContent">

    <div class="lower-container">
            <h3 style="text-align: center;">ஆளுமை </h3>

            <?php
// Include the database connection
include 'connect.php';

// Query to fetch the latest 5 uploads from the 'ஆளுமை' category
$sql = "SELECT id, category, title, image_path, content 
        FROM uploads 
        WHERE category = 'ஆளுமை' 
        ORDER BY upload_date DESC 
        LIMIT 3";

// Execute the query
$result = $conn->query($sql);

// Check if any uploads exist
if ($result->num_rows > 0) {
    while ($row = $result->fetch_assoc()) {
        // Display each upload dynamically
        echo '<div class="update-box" data-id="' . htmlspecialchars($row['id']) . '">
                <img src="' . htmlspecialchars($row['image_path']) . '" alt="' . htmlspecialchars($row['title']) . '" class="prof-photo">
                <div class="content">
                     <h2 class="updates-header">' . htmlspecialchars($row['title']) . '</h2>
                    <p>' . mb_substr(strip_tags($row['content']), 0, 90, 'UTF-8') . '...</p>
                    <a href="view.php?id=' . htmlspecialchars($row['id']) . '" class="cta-btn">மேலும் வாசிக்க</a>
                </div>
              </div>';
    }
} else {
    echo '<p>சமீபத்திய புதுப்பிப்புகள் இல்லை.</p>';
}


?>
            
          
        </div>
        <div class="upper-container">
        <h3 style="text-align: center;">திருக்குறள் </h3>
            <?php
// Include the database connection
include 'connect.php';

// Query to fetch the latest 5 uploads from the 'ஆளுமை' category
// Query to fetch content
$sql = "SELECT id, category, title, image_path, content FROM uploads WHERE category = 'திருக்குறள்' ORDER BY upload_date DESC LIMIT 1";
$result = $conn->query($sql);

if ($result->num_rows > 0) {
    while ($row = $result->fetch_assoc()) {
        echo '<div class="update-box" data-id="' . htmlspecialchars($row['id']) . '">
                <img src="' . htmlspecialchars($row['image_path']) . '" alt="' . htmlspecialchars($row['title']) . '" class="prof-photo">
                <div class="content">
                     <h2 class="updates-header">' . htmlspecialchars($row['title']) . '</h2>
                     <p>' . mb_substr(strip_tags($row['content']), 0, 90, 'UTF-8') . '...</p>
                     <a href="view.php?id=' . htmlspecialchars($row['id']) . '" class="cta-btn">மேலும் வாசிக்க</a>
                </div>
              </div>';
    }
} else {
    echo '<p>சமீபத்திய புதுப்பிப்புகள் இல்லை.</p>';
}



?>
             
        </div>
        
    </div>

    <!--Left Side-->
    <div class="left-side" id="leftContent">
        <!--h2 style="text-align: center; font-weight: bold;">சமீபத்திய புதிப்பிப்புகள்</h2-->
    </div>
    
    <!-- Right Side >
    <div class="right-side" id="updateList">
        </*?php
        require_once('connect.php');

        // Fetch categories from the database
        $query = "SELECT display_name, category_name, image_path FROM categories ORDER BY button_position ASC";
        $result = $conn->query($query);

        if ($result->num_rows > 0) {
            while ($row = $result->fetch_assoc()) {
                echo '
                <div class="update-box" onclick="fetchArticles(\'' . $row['category_name'] . '\')" style="border: 2px solid #121111;">
                    <img src="' . $row['image_path'] . '" alt="' . $row['display_name'] . '" class="update-photo">
                    <div class="update-title">' . $row['display_name'] . '</div>
                </div>';
            }
        } else {
            echo '<p>No categories available.</p>';
        }
        ?>
    </div-->
</div>

    






<!-- Footer Section -->
<footer style="background-color: #1a2e35; color: #fff; padding: 20px 0; text-align: center;">
    <div style="max-width: 1200px; margin: auto; display: flex; flex-wrap: wrap; justify-content: space-between; padding: 0 20px;">
        <!-- About Us Section -->
        <div style="flex: 1; min-width: 250px; margin-bottom: 15px;">
            <h5>எங்களைப் பற்றி</h5>
            <p>சமீபத்திய புதுப்பிப்புகள் மற்றும் தரமான உள்ளடக்கத்தை கொண்டு வர நாங்கள் கடமைப்பட்டுள்ளோம். மேலும் புதுப்பிப்புகளுக்கு இணைந்திருங்கள்.</p>
        </div>
        <!-- Quick Links Section -->
        <div style="flex: 1; min-width: 250px; margin-bottom: 15px;">
            <h5>விரைவு இணைப்புகள்</h5>
            <ul style="list-style: none; padding: 0;">
                <li><a href="index.php" style="color: #fff; text-decoration: none;">முகப்பு</a></li>
                <li><a href="#" style="color: #fff; text-decoration: none;">கட்டுரைகள்</a></li>
                <li><a href="#" style="color: #fff; text-decoration: none;">இலக்கியம்</a></li>
                <li><a href="#" style="color: #fff; text-decoration: none;">பொது அறிவு</a></li>
            </ul>
        </div>
       <!-- Contact Us Section --> 
<div style="flex: 1; min-width: 350px; margin-bottom: 15px; line-height: 1.6;">
    <h5 style="margin-bottom: 10px;">தொடர்புகளுக்கு</h5>
    <p style="margin-bottom: 10px;">Email: 
        <a href="mailto:info@tamilnaatru.com" style="color: rgb(240, 244, 248); text-decoration: none;">info@tamilnaatru.com</a>
    </p>
    <p style="margin-bottom: 15px;">Phone: +91 123 456 7890</p>
    <div style="margin-top: 10px;">
        <a href="#" style="color: #fff; text-decoration: none; margin-right: 10px;">
            <i class="fab fa-facebook-f"></i>
        </a>
        <a href="#" style="color: #fff; text-decoration: none; margin-right: 10px;">
            <i class="fab fa-twitter"></i>
        </a>
        <a href="#" style="color: #fff; text-decoration: none;">
            <i class="fab fa-instagram"></i>
        </a>
    </div>
</div>

    </div>
    <p style="font-size: 14px; margin-top: 20px;">&copy; 2024 Faite. All Rights Reserved.</p>
</footer>


  
  <!-- end  footer section -->

<script>





    // Fetch latest uploads using AJAX
    fetch('fetch_latest_uploads.php')
        .then(response => {
            if (!response.ok) {
                throw new Error("Failed to fetch updates.");
            }
            return response.text(); // Get the PHP output as text
        })
        .then(data => {
            // Insert the fetched content into the .left-side div
            document.querySelector('.left-side').innerHTML += data;

            // Add event listeners to the dynamically added update boxes
            document.querySelectorAll(".left-side").forEach((box) => {
                box.addEventListener("click", () => {
                    const id = box.getAttribute("data-id"); // Get the data-id of the clicked box
                    const leftSide = document.querySelector('.left-side');
                    leftSide.innerHTML = updates[id]; // Update the left-side content
                });
            });
        })
        .catch(error => {
            console.error('Error:', error);
            document.querySelector('.left-side').innerHTML += '<p>Error loading updates.</p>';
        });


 
 





function fetchArticles(category) {
    console.log("Fetching articles for category:", category); // Debugging output
    fetch("fetch_articles.php", {
        method: "POST",
        headers: {
            "Content-Type": "application/x-www-form-urlencoded",
        },
        body: "category=" + encodeURIComponent(category),
    })
    .then(response => response.json())
    .then(data => {
        console.log("Articles received:", data); // Debugging output
        const leftContent = document.getElementById("leftContent");

        if (data.length > 0) {
            leftContent.innerHTML = data
                .map(article => {
                    // Strip HTML tags and truncate the content to 150 characters
                    const truncatedContent = article.content.replace(/<[^>]+>/g, '').substring(0, 120);
                    
                    return `
                        <div class="update-box" data-id="${article.id}">
                            <img src="${article.image_path}" alt="${article.title}" class="prof-photo">
                            <div class="content">
                                <h2 class="updates-header">${article.title}</h2>
                                <p>${truncatedContent}...</p>
                                <a href="view.php?id=${article.id}" class="cta-btn">மேலும் வாசிக்க</a>
                            </div>
                        </div>
                    `;
                })
                .join("");
        } else {
            leftContent.innerHTML = "<p>No articles found for this category.</p>";
        }
    })
    .catch(error => console.error("Error fetching articles:", error));
}



</script>
</body>
</body>

</html>